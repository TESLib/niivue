<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <meta name="viewport" content="width=device-width,initial-scale=1.0" />
  <title>Text Component Alignment Demo</title>
  <link rel="stylesheet" href="light.css" />
</head>

<body>
  <noscript>niivue requires JavaScript.</noscript>
  <header>
  </header>
  <main>
    <canvas id="gl1"></canvas>
  </main>
  <script type="module" async>
    import * as niivue from "../dist/index.js";

    async function createTextBoxesAtAlignmentPoints() {
      const textColor = [1.0, 1.0, 1.0, 1.0];
      const outlineColor = [1.0, 1.0, 1.0, 1.0];
      const fillColor = [0.0, 0.0, 0.0, 0.3];
      const fontOutlineColor = [0.0, 0.0, 0.0, 1.0];
      const str = "Alignment Text";
      const scale = 0.5;
      const margin = 15;

      const ui = nv1.ui;
      const alignmentPoints = [
        niivue.UIKit.alignmentPoint.TOPLEFT, niivue.UIKit.alignmentPoint.TOPCENTER, niivue.UIKit.alignmentPoint.TOPRIGHT,
        niivue.UIKit.alignmentPoint.MIDDLELEFT, niivue.UIKit.alignmentPoint.MIDDLECENTER, niivue.UIKit.alignmentPoint.MIDDLERIGHT,
        niivue.UIKit.alignmentPoint.BOTTOMLEFT, niivue.UIKit.alignmentPoint.BOTTOMCENTER, niivue.UIKit.alignmentPoint.BOTTOMRIGHT,
      ];

      alignmentPoints.forEach((alignment, index) => {
        const roundness = index / (alignmentPoints.length - 1);

        // Determine position based on alignment
        const pos = getAlignmentPosition(alignment, nv1.canvas.width, nv1.canvas.height);

        // Create TextBoxComponentConfig
        const textBoxConfig = {
          position: pos,
          font: nv1.defaultFont,
          text: str,
          textColor: textColor,
          outlineColor: outlineColor,
          fillColor: fillColor,
          margin: margin,
          roundness: roundness,
          scale: scale,
          maxWidth: 0,
          fontOutlineColor: fontOutlineColor,
          fontOutlineThickness: 1,
          alignmentPoint: alignment,
        };

        // Instantiate the TextBoxComponent
        const textBox = new niivue.TextBoxComponent(textBoxConfig);

        // Add the text box to the UI
        ui.addComponent(textBox);
      });

      nv1.drawScene();
    }

    // Helper function to determine position based on alignment
    function getAlignmentPosition(alignment, canvasWidth, canvasHeight) {
      switch (alignment) {
        case niivue.UIKit.alignmentPoint.TOPLEFT:
          return [10, 10];
        case niivue.UIKit.alignmentPoint.TOPCENTER:
          return [canvasWidth / 2, 10];
        case niivue.UIKit.alignmentPoint.TOPRIGHT:
          return [canvasWidth - 10, 10];
        case niivue.UIKit.alignmentPoint.MIDDLELEFT:
          return [10, canvasHeight / 2];
        case niivue.UIKit.alignmentPoint.MIDDLECENTER:
          return [canvasWidth / 2, canvasHeight / 2];
        case niivue.UIKit.alignmentPoint.MIDDLERIGHT:
          return [canvasWidth - 10, canvasHeight / 2];
        case niivue.UIKit.alignmentPoint.BOTTOMLEFT:
          return [10, canvasHeight - 10];
        case niivue.UIKit.alignmentPoint.BOTTOMCENTER:
          return [canvasWidth / 2, canvasHeight - 10];
        case niivue.UIKit.alignmentPoint.BOTTOMRIGHT:
          return [canvasWidth - 10, canvasHeight - 10];
        default:
          return [10, 10];
      }
    }

    // Initialize Niivue
    const nv1 = new niivue.Niivue();
    await nv1.attachTo("gl1");
    nv1.setSliceType(nv1.sliceTypeRender);

    // Create text boxes
    createTextBoxesAtAlignmentPoints();
  </script>
</body>

</html>
