<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width,initial-scale=1.0" />
    <title>Color Bar Component Demo</title>
    <link rel="stylesheet" href="light.css" />
</head>

<body>
    <noscript>niivue requires JavaScript.</noscript>
    <header>
        <label for="colormap-select">Select Colormap:</label>
        <select id="colormap-select">
            <option value="viridis" selected>Viridis</option>
            <option value="magma">Magma</option>
            <option value="plasma">Plasma</option>
            <option value="inferno">Inferno</option>
            <option value="cividis">Cividis</option>
        </select>
    </header>
    <main>
        <canvas id="gl1"></canvas>
    </main>
    <script type="module" async>
        import * as niivue from "../dist/index.js";

        async function setupColorBarComponent() {
            // Initialize Niivue
            const nv1 = new niivue.Niivue();
            await nv1.attachTo("gl1");
            nv1.setSliceType(nv1.sliceTypeRender);

            // Load font for text rendering
            const font = new niivue.UIKFont(nv1.gl);
            await font.loadFont("../fonts/UbuntuBold.png", "../fonts/UbuntuBold.json");

            // Colorbar properties
            const labels = ["Low", "Medium", "High"];
            const minMax = [0, 1];
            const size = [300, 20]; // Width and height of the color bar
            const position = [(nv1.canvas.width - size[0]) / 2, nv1.canvas.height / 4]; // Center horizontally, place near top
            const bounds = [position[0], position[1], size[0], size[1]];
            const colormapName = "viridis"; // Default colormap

            // Create the ColorbarComponentConfig
            const colorbarConfig = {
                gl: nv1.gl,
                font: font,
                labels: labels,
                minMax: minMax,
                colormapName: colormapName,
                bounds: bounds,
            };

            // Instantiate the ColorbarComponent
            const colorbarComponent = new niivue.ColorbarComponent(colorbarConfig);
            colorbarComponent.alignmentPoint = niivue.UIKit.alignmentPoint.MIDDLECENTER;

            // Add the component to the UI
            nv1.ui.addComponent(colorbarComponent);

            // Initial rendering
            nv1.drawScene();

            // Handle colormap selection
            document
                .getElementById("colormap-select")
                .addEventListener("change", (event) => {
                    const selectedColormap = event.target.value;
                    colorbarComponent.colormapName = selectedColormap; // Update the colormap
                    nv1.drawScene(); // Redraw the scene
                });
        }

        // Execute the setup function
        setupColorBarComponent();
    </script>
</body>

</html>
