<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width,initial-scale=1.0" />
    <title>Base Container Component Example</title>
    <link rel="stylesheet" href="light.css" />
</head>

<body>
    <noscript>niivue requires JavaScript.</noscript>
    <header>
    </header>
    <main>
        <canvas id="gl1"></canvas>
    </main>
    <script type="module" async>
        import * as niivue from "../dist/index.js"

        async function setupBaseContainerComponent() {
            // Initialize Niivue and attach to canvas
            const nv1 = new niivue.Niivue()
            await nv1.attachTo("gl1")
            nv1.setSliceType(nv1.sliceTypeRender)

            // Load font for text rendering
            const font = new niivue.UIKFont(nv1.gl)
            await font.loadFont("../fonts/UbuntuBold.png", "../fonts/UbuntuBold.json")

            // Define text properties and strings
            const textColor = [1.0, 1.0, 1.0, 1.0]
            const scale = 0.25
            const texts = [
                "The quick brown fox jumps over the lazy dog!",
                "Hello World!",
                "Niivue Text Component Example",
                "OpenGL Rendering with Niivue",
                "Enjoy Creating UI with Niivue!"
            ]

            // Create text components
            const textComponents = texts.map((str, index) => {
                const height = font.getTextHeight(str, scale)
                const width = font.getTextWidth(str, scale)
                const pos = [
                    (nv1.canvas.width - width) / 2,
                    nv1.canvas.height / 2 - 150 + index * height
                ]

                const textConfig = {
                    position: pos,
                    font: font,
                    text: str,
                    textColor: textColor,
                    scale: scale
                }

                const textComponent = new niivue.TextComponent(textConfig)

                // Add mouse enter and mouse leave effects
                textComponent.addEventEffect(
                    'pointerenter',
                    textComponent,
                    'textColor',
                    'setValue',
                    [0, 1, 0, 1] // Set text color to green on hover
                )
                textComponent.addEventEffect(
                    'pointerleave',
                    textComponent,
                    'textColor',
                    'animateValue',
                    [0, 1, 0, 1],
                    [1, 1, 1, 1],
                    3000 // Animation duration
                )

                return textComponent
            })

            // Create BaseContainerComponentConfig
            const containerConfig = {
                position: [0, 0],
                canvas: nv1.canvas,
                isHorizontal: false,
                padding: 20
            }

            // Create container component and add text components
            const containerComponent = new niivue.BaseContainerComponent(containerConfig)

            textComponents.forEach((textComponent) =>
                containerComponent.addComponent(textComponent)
            )

            // Center container on the canvas
            const bounds = containerComponent.getBounds()
            containerComponent.setPosition([
                (nv1.canvas.width - bounds[2]) / 2,
                (nv1.canvas.height - bounds[3]) / 2
            ])

            containerComponent.alignmentPoint = niivue.UIKit.alignmentPoint.TOPCENTER

            // Add container to UI and render the scene
            nv1.ui.addComponent(containerComponent)
            nv1.drawScene()
        }

        // Execute setup function
        setupBaseContainerComponent()
    </script>
</body>

</html>
