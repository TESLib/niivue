<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width,initial-scale=1.0" />
    <title>Textbox Word Wrapping</title>
    <link rel="stylesheet" href="light.css" />
</head>

<body>
    <noscript>niivue requires JavaScript.</noscript>
    <header>
    </header>
    <main>
        <canvas id="gl1"></canvas>
    </main>
    <script type="module" async>
        import * as niivue from "../dist/index.js";

        async function drawText() {
            const ui = nv1.ui;
            const canvasWidth = nv1.canvas.width;
            const canvasHeight = nv1.canvas.height;

            // Define the text to be displayed
            const str = 'Sharing neuroimaging datasets enables reproducibility, education, tool development, and new discoveries. Neuroimaging from many studies are publicly available, providing a glimpse into progressive disorders and human development.';

            const maxWidth = nv1.canvas.width / 8
            const textColor = [0, 0, 1, 1]
            const fillColor = [1, 1, 1, 0.6]
            const outlineColor = [0, 0, 1, 1]
            const spacing = font.textHeight * Math.min(nv1.gl.canvas.height, nv1.gl.canvas.width) * 2
            const roundness = 0.25
            const scale = 0.5

            // Create configuration for TextBoxComponent
            const textBoxConfig = {
                font: nv1.defaultFont, // Font
                position: [
                    50, 50
                ],
                text: str,               // Text
                textColor, // Text color
                outlineColor, // Outline color
                fillColor, // Fill color
                margin: 15,              // Margin
                roundness: 0.25,         // Roundness
                scale: 0.5,              // Scale
                maxWidth, // Max width for word wrapping
                fontOutlineColor: [0, 0, 0, 1], // Font outline color
                fontOutlineThickness: 1, // Font outline thickness
                alignmentPoint: niivue.UIKit.alignmentPoint.TOPCENTER // Alignment point
            };

            // Create a TextBoxComponent using the config
            const textBox = new niivue.TextBoxComponent(textBoxConfig);
            console.log(textBox)
            // Add the TextBoxComponent to the UI
            ui.addComponent(textBox);

            // Render the scene
            nv1.drawScene();
        }

        // Initialize Niivue and attach to canvas
        const nv1 = new niivue.Niivue();
        await nv1.attachTo("gl1");
        nv1.setSliceType(nv1.sliceTypeRender);

        // Load font
        const font = new niivue.UIKFont(nv1.gl);
        await font.loadFont("../fonts/UbuntuBold.png", "../fonts/UbuntuBold.json");

        // Draw the text box with word wrapping
        drawText();
    </script>
</body>

</html>
