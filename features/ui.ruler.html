<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width,initial-scale=1.0" />
    <title>Ruler Components</title>
    <link rel="stylesheet" href="light.css" />
</head>
<body>
    <noscript>niivue requires JavaScript.</noscript>
    <header></header>
    <main>
        <canvas id="gl1"></canvas>
    </main>
    <script type="module" async>
        import * as niivue from "../dist/index.js";

        const lineColor = [0.529, 0.808, 0.980, 1.0]; // Light blue color
        const textColor = [1.0, 1.0, 1.0, 1.0];
        const units = "mm";
        const lineThickness = 2;

        async function drawRulers() {
            const font = nv1.defaultFont;

            // Ruler configurations
            const rulersConfig = [
                {
                    startPoint: [-50, 20],
                    endPoint: [50, 20],
                    tags: [niivue.SLICE_TYPE.AXIAL.toString()],
                },
                {
                    startPoint: [20, 60],
                    endPoint: [20, -30],
                    tags: [niivue.SLICE_TYPE.CORONAL.toString()],
                },
                {
                    startPoint: [-25, -25],
                    endPoint: [25, 25],
                    tags: [niivue.SLICE_TYPE.SAGITTAL.toString()],
                },
            ];

            // Add rulers to UI
            rulersConfig.forEach(({ startPoint, endPoint, tags }) => {
                const ruler = new niivue.RulerComponent({
                    startPoint,
                    endPoint,
                    units,
                    font,
                    textColor,
                    lineColor,
                    lineThickness,
                });
                ruler.tags = tags;
                ui.addComponent(ruler);
            });

            // Draw the scene
            nv1.drawScene();
        }

        // Initialize Niivue and attach it to the canvas
        const volumeList1 = [
            { url: "../images/mni152.nii.gz", colormap: "gray", visible: true, opacity: 1 },
            { url: "../images/hippo.nii.gz", colormap: "red", visible: true, opacity: 1 },
        ];

        const nv1 = new niivue.Niivue();
        nv1.opts.multiplanarShowRender = niivue.SHOW_RENDER.ALWAYS;
        nv1.setSliceType(nv1.sliceTypeMultiplanar);
        nv1.attachTo("gl1");
        await nv1.loadVolumes(volumeList1);

        // UI component initialization
        const ui = nv1.ui;

        // Draw the rulers
        drawRulers();
    </script>
</body>
</html>
